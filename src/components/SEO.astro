---
// SEO.astro - Reusable SEO component
export interface Props {
  title?: string;
  description?: string;
  image?: string;
  canonical?: string;
  type?: string;
  keywords?: string[];
  author?: string;
  twitterCard?: string;
  twitterTitle?: string;
  twitterDescription?: string;
  twitterImage?: string;
  openGraphTitle?: string;
  openGraphDescription?: string;
  structuredData?: object;
}

const {
  title = 'Christopher Tagliaferro - Technology Consultant & Virtual CIO',
  description = "Senior Technical Program Manager with 12+ years driving technology transformations that actually work. PMP certified, equity-focused, and refreshingly honest about tech's absurdities.",
  image = '/og-image.jpg',
  canonical = Astro.url.href,
  type = 'website',
  keywords = [
    'technical program manager',
    'product management',
    'systems integration',
    'agile',
    'transformation',
    'accessibility',
  ],
  author = 'Christopher Tagliaferro',
  twitterCard = 'summary_large_image',
  twitterTitle,
  twitterDescription,
  twitterImage,
  openGraphTitle,
  openGraphDescription,
  structuredData,
} = Astro.props;

// Use provided values or fall back to defaults
const ogTitle = openGraphTitle || title;
const ogDescription = openGraphDescription || description;
const twTitle = twitterTitle || title;
const twDescription = twitterDescription || description;
const twImage = twitterImage || image;

// Ensure title includes site name if not already present
const fullTitle = title.includes('Christopher')
  ? title
  : `${title} | Christopher Tagliaferro`;
---

<!-- Essential Meta Tags -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="description" content={description} />
<meta name="keywords" content={keywords.join(', ')} />
<meta name="author" content={author} />
<title>{fullTitle}</title>

<!-- Canonical URL -->
<link rel="canonical" href={canonical} />

<!-- Open Graph / Facebook -->
<meta property="og:type" content={type} />
<meta property="og:url" content={canonical} />
<meta property="og:title" content={ogTitle} />
<meta property="og:description" content={ogDescription} />
<meta property="og:image" content={new URL(image, Astro.site)} />
<meta property="og:site_name" content="Christopher Tagliaferro" />
<meta property="og:locale" content="en_US" />

<!-- Twitter -->
<meta name="twitter:card" content={twitterCard} />
<meta name="twitter:url" content={canonical} />
<meta name="twitter:title" content={twTitle} />
<meta name="twitter:description" content={twDescription} />
<meta name="twitter:image" content={new URL(twImage, Astro.site)} />
<meta name="twitter:creator" content="@christagliaferro" />

<!-- Additional SEO -->
<meta name="robots" content="index, follow" />
<meta name="theme-color" content="#b8869a" />
<meta name="msapplication-TileColor" content="#b8869a" />

<!-- Favicon -->
<link rel="icon" type="image/x-icon" href="/favicon.ico" />
<link rel="apple-touch-icon" href="/apple-touch-icon.png" />

<!-- Structured Data -->
{
  structuredData && (
    <script
      type="application/ld+json"
      set:html={JSON.stringify(structuredData)}
    />
  )
}
